---
title: Visualization Features
description: Visualization options for NetBox data
---

Data fetched from NetBox can be visualized in various ways.

## Bandwidth Visualization

Bandwidth is auto-detected from the interface `speed` field and represented by line thickness.

| NetBox speed (kbps) | Shumoku bandwidth | Visualization |
|---------------------|-------------------|---------------|
| 1,000,000 | 1G | 1 line |
| 10,000,000 | 10G | 2 lines |
| 25,000,000 | 25G | 3 lines |
| 40,000,000 | 40G | 4 lines |
| 100,000,000+ | 100G | 5 lines |

---

## VLAN Visualization

VLAN information is collected from interface `tagged_vlans` and `untagged_vlan` and set on links.

- VLANs from both endpoint interfaces are merged
- Color-coded based on VLAN ID
- Trunk links are identified

---

## Cable Type Color Coding

With `colorByCableType: true` (CLI: enabled by default, disable with `--no-colors`), colors and line styles are applied based on cable type.

| Cable Type | Color | Line Style |
|------------|-------|------------|
| SMF (Single Mode) | Yellow | Solid |
| MMF-OM3 | Green | Solid |
| MMF-OM4 | Cyan | Solid |
| Cat6 | Blue | Solid |
| Cat6a | Purple | Solid |
| DAC (Passive) | Orange | Dashed |
| DAC (Active) | Red | Dashed |
| AOC | Pink | Dashed |

---

## Device Status Visualization

With `colorByStatus: true` (CLI: `--color-by-status`), styles are applied based on device state.

| Status | Style |
|--------|-------|
| active | Default |
| planned | Dashed border, gray, semi-transparent |
| staged | Yellow background |
| failed | Red background |
| offline | Gray, semi-transparent |
| inventory | Blue background, dashed |
| decommissioning | Orange background, dashed |

---

## Grouping Options

Specify device grouping method with `groupBy` option (CLI: `--group-by, -g`).

| Value | Description |
|-------|-------------|
| `tag` | Group by NetBox tag (default) |
| `site` | Group by site |
| `location` | Group by location |
| `prefix` | Group by IP prefix (/16) |
| `none` | No grouping |

---

## Legend

Display a legend on the diagram with `legend` option (CLI: `--legend`).

### CLI Usage

```bash
npx netbox-to-shumoku --legend -o network.svg
```

### Library Usage

```typescript
// Simple enable
const graph = convertToNetworkGraph(devices, interfaces, cables, {
  legend: true
})

// Customize
const graph = convertToNetworkGraph(devices, interfaces, cables, {
  legend: {
    enabled: true,
    position: 'top-right',     // Display position
    showDeviceTypes: true,     // Show device types
    showBandwidth: true,       // Show bandwidth
    showCableTypes: true,      // Show cable types
    showVlans: false,          // Show VLANs
  }
})
```

### Legend Options

| Setting | Description | Default |
|---------|-------------|---------|
| `enabled` | Show legend | `true` |
| `position` | Display position | `top-right` |
| `showDeviceTypes` | Show device type icons | `true` |
| `showBandwidth` | Show bandwidth indicators | `true` |
| `showCableTypes` | Show cable type colors | `true` |
| `showVlans` | Show VLAN colors | `false` |

**Position options:**
- `top-left`
- `top-right`
- `bottom-left`
- `bottom-right`

---

## Hierarchical Output

Multi-site networks can be converted to hierarchical YAML.

```typescript
import { convertToHierarchicalYaml } from '@shumoku/netbox'

const result = convertToHierarchicalYaml(
  deviceResp,
  interfaceResp,
  cableResp,
  {
    hierarchical: true,
    hierarchyDepth: 'location',  // 'site' | 'location' | 'rack'
    fileBasePath: './',
    theme: 'light',
  }
)

// Result
console.log(result.main)           // Content of main.yaml
console.log(result.files)          // Map<locationId, yamlContent>
console.log(result.crossLinks)     // List of cross-site links
```

### Hierarchy Depth

| hierarchyDepth | Description |
|----------------|-------------|
| `site` | Split files by site |
| `location` | By location (default) |
| `rack` | By rack (most granular) |

### Output Example

```yaml
# main.yaml
name: "Network Overview"

subgraphs:
  - id: tokyo-dc
    label: "Tokyo DC"
    file: "./tokyo-dc.yaml"
  - id: osaka-dc
    label: "Osaka DC"
    file: "./osaka-dc.yaml"

links:
  # Cross-site links reference devices directly
  - from:
      node: tokyo-router
      port: wan1
    to:
      node: osaka-router
      port: wan1
    bandwidth: 10G
```
